<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Test plots â€¢ forestr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">forestr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/forestgeo/forestr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Test plots</h1>
                        <h4 class="author">Mauro Lepore</h4>
            
<<<<<<< HEAD
            <h4 class="date">2017-05-22</h4>
||||||| merged common ancestors
            <h4 class="date">2017-05-12</h4>
=======
            <h4 class="date">2017-05-23</h4>
>>>>>>> dev
          </div>

    
    
<div class="contents">
<div id="graph-outliers-spp" class="section level3">
<h3 class="hasAnchor">
<a href="#graph-outliers-spp" class="anchor"></a><code><a href="../reference/graph.outliers.spp.html">graph.outliers.spp()</a></code>
</h3>
<div class="figure" style="text-align: center">
<img src="ref_graph_outliers_spp.png" alt="Reference" width="75%"><p class="caption">
Reference
</p>
</div>
<div class="figure" style="text-align: center">
<img src="actual_graph_outliers_spp.png" alt="Actual" width="75%"><p class="caption">
Actual
</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">extract.growthdata
<span class="co">#&gt; function(census1, </span>
<span class="co">#&gt;                               census2,</span>
<span class="co">#&gt;                               growcol = "incgr",</span>
<span class="co">#&gt;                               mingrow = 0.1,</span>
<span class="co">#&gt;                               logit = "x",</span>
<span class="co">#&gt;                               growthfunc = growth.biomass.indiv,</span>
<span class="co">#&gt;                               pomcut = 10000,</span>
<span class="co">#&gt;                               rounddown = FALSE,</span>
<span class="co">#&gt;                               mindbh = 10,</span>
<span class="co">#&gt;                               dbhunit = "mm",</span>
<span class="co">#&gt;                               err.limit = 4,</span>
<span class="co">#&gt;                               maxgrow = 75,</span>
<span class="co">#&gt;                               exclude.stem.change = TRUE,</span>
<span class="co">#&gt;                               returnfull = FALSE) {   </span>
<span class="co">#&gt;   growthtable = growthfunc(</span>
<span class="co">#&gt;     census1,</span>
<span class="co">#&gt;     census2,</span>
<span class="co">#&gt;     rounddown = rounddown,</span>
<span class="co">#&gt;     mindbh = mindbh,</span>
<span class="co">#&gt;     dbhunit = dbhunit,</span>
<span class="co">#&gt;     err.limit = err.limit,</span>
<span class="co">#&gt;     maxgrow = maxgrow,</span>
<span class="co">#&gt;     pomcut = pomcut,</span>
<span class="co">#&gt;     exclude.stem.change = exclude.stem.change</span>
<span class="co">#&gt;   )</span>
<span class="co">#&gt;   growthrate = growthtable[, growcol]</span>
<span class="co">#&gt;   dbh = growthtable$dbh1</span>
<span class="co">#&gt;   treeID = growthtable$treeID</span>
<span class="co">#&gt;   agb = growthtable$agb1</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   if (logit == "x" | logit == "xy")</span>
<span class="co">#&gt;   {</span>
<span class="co">#&gt;     dbh = log(growthtable$dbh1)</span>
<span class="co">#&gt;     agb = log(growthtable$agb1)</span>
<span class="co">#&gt;   }</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   if (logit == "y" | logit == "xy")</span>
<span class="co">#&gt;   {</span>
<span class="co">#&gt;     growthrate[growthrate &lt;= 0] = mingrow</span>
<span class="co">#&gt;     growthrate = log(growthrate)</span>
<span class="co">#&gt;   }</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   result = data.frame(</span>
<span class="co">#&gt;     sp = I(growthtable$sp),</span>
<span class="co">#&gt;     treeID,</span>
<span class="co">#&gt;     dbh = dbh,</span>
<span class="co">#&gt;     agb = agb,</span>
<span class="co">#&gt;     growth = growthrate</span>
<span class="co">#&gt;   )</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   cond_1 &lt;- !is.na(result$growth) &amp; </span>
<span class="co">#&gt;     !is.na(result$dbh) &amp; </span>
<span class="co">#&gt;     !is.na(result$agb) &amp; </span>
<span class="co">#&gt;     !is.na(result$sp)</span>
<span class="co">#&gt;   result &lt;- result[cond_1, , drop = FALSE]</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   if(!returnfull) return(result)</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   cond_2 &lt;- !is.na(growthtable$growthrate) &amp;</span>
<span class="co">#&gt;     !is.na(growthtable$dbh1) &amp;</span>
<span class="co">#&gt;     !is.na(growthtable$agb1) &amp;</span>
<span class="co">#&gt;     !is.na(growthtable$sp)</span>
<span class="co">#&gt;   vars &lt;- c('sp', 'treeID', 'dbh1', 'dbh2', 'agb1', 'agb2', 'time', 'incgr')</span>
<span class="co">#&gt;   full &lt;- growthtable[cond_2, vars, drop = FALSE]</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   colnames(full)[which(colnames(full) == 'incgr')] = 'growth'</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   if(returnfull) return(full)</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; &lt;environment: namespace:forestr&gt;</span></code></pre></div>
</div>
<div id="complete-plotmap" class="section level3">
<h3 class="hasAnchor">
<a href="#complete-plotmap" class="anchor"></a><code><a href="../reference/complete.plotmap.html">complete.plotmap()</a></code>
</h3>
<div class="figure" style="text-align: center">
<img src="ref_complete_plotmap.png" alt="Reference" width="75%"><p class="caption">
Reference
</p>
</div>
<div class="figure" style="text-align: center">
<img src="actual_complete_plotmap.png" alt="Actual" width="75%"><p class="caption">
Actual
</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">complete.plotmap
<span class="co">#&gt; function(cns = bci.full6,</span>
<span class="co">#&gt;                             spnames = NULL,</span>
<span class="co">#&gt;                             mindbh = 10,</span>
<span class="co">#&gt;                             export = 'no',</span>
<span class="co">#&gt;                             nospp = 3,</span>
<span class="co">#&gt;                             plotdim = c(1000, 500),</span>
<span class="co">#&gt;                             clrlist = c('blue', 'green', 'red', 'yellow', 'gray'),</span>
<span class="co">#&gt;                             ptsize = c(.45, 0.3),</span>
<span class="co">#&gt;                             xrange = c(0, 100),</span>
<span class="co">#&gt;                             yrange = c(0, 100),</span>
<span class="co">#&gt;                             wd = 1100,</span>
<span class="co">#&gt;                             ht = 850,</span>
<span class="co">#&gt;                             side = 6,</span>
<span class="co">#&gt;                             labsize = 1.75,</span>
<span class="co">#&gt;                             axisdiv = 10,</span>
<span class="co">#&gt;                             filepath = '/home/condit/data/maps/',</span>
<span class="co">#&gt;                             outfile = 'fullplotmap') {</span>
<span class="co">#&gt;   filename=get.filename(file=outfile,path=filepath,exp=export,species="FullPlot")</span>
<span class="co">#&gt;   define.graphwindow(export = export,</span>
<span class="co">#&gt;     h = ht,</span>
<span class="co">#&gt;     w = wd,</span>
<span class="co">#&gt;     file = filename</span>
<span class="co">#&gt;   )</span>
<span class="co">#&gt;   if(export!="unix" &amp; export!="no" &amp; export!="mac" &amp; export!="windows") on.exit(graphics.off())</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   cond_1 &lt;- cns$status == 'A' &amp; </span>
<span class="co">#&gt;    cns$dbh &gt;= mindbh &amp; </span>
<span class="co">#&gt;    insideRectangle(cns$gx, cns$gy, xrange, yrange)</span>
<span class="co">#&gt;   alive = cns[cond_1, , drop = FALSE]</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   N=table(alive$sp)</span>
<span class="co">#&gt;   if(is.null(spnames)) spnames=names(sort(N,decreasing=TRUE))[1:nospp]</span>
<span class="co">#&gt;   map1species(alive,color='black',plotdim=plotdim,plotside=side,cutoff=c(mindbh,10000),size=ptsize[2],</span>
<span class="co">#&gt;              xrange=xrange,yrange=yrange,axisdiv=axisdiv,labsize=labsize)</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   if(is.null(nospp)) return('')</span>
<span class="co">#&gt;   if(nospp==0) return('')</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   for(i in 1:nospp)</span>
<span class="co">#&gt;    {</span>
<span class="co">#&gt;     onespdata &lt;- alive[alive$sp == spnames[i], , drop = FALSE]</span>
<span class="co">#&gt;     </span>
<span class="co">#&gt;     map1species(onespdata,color=clrlist[i],cutoff=c(mindbh,10000),size=ptsize[1],add=TRUE)</span>
<span class="co">#&gt;    }</span>
<span class="co">#&gt;   }</span>
<span class="co">#&gt; &lt;environment: namespace:forestr&gt;</span></code></pre></div>
</div>
<div id="spparea-sq" class="section level3">
<h3 class="hasAnchor">
<a href="#spparea-sq" class="anchor"></a><code><a href="../reference/spparea.sq.html">spparea.sq()</a></code>
</h3>
<div class="figure" style="text-align: center">
<img src="ref_spparea_sq.png" alt="Reference" width="75%"><p class="caption">
Reference
</p>
</div>
<div class="figure" style="text-align: center">
<img src="actual_spparea_sq.png" alt="Actual" width="75%"><p class="caption">
Actual
</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">spparea.sq
<span class="co">#&gt; function(censdata,</span>
<span class="co">#&gt;                        spcolumn = 'sp',</span>
<span class="co">#&gt;                        size,</span>
<span class="co">#&gt;                        rectdim = 1,</span>
<span class="co">#&gt;                        mindbh = NULL,</span>
<span class="co">#&gt;                        plotdim = c(1000, 500),</span>
<span class="co">#&gt;                        replicates = 10,</span>
<span class="co">#&gt;                        unidennames = c("**", "UNID", "uniden", "UNIDEN")) {</span>
<span class="co">#&gt;   toolong=size[size&gt;plotdim[1]]</span>
<span class="co">#&gt;   size=size[size*rectdim&lt;=plotdim[2]]</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   if(length(toolong)&gt;0)</span>
<span class="co">#&gt;    {</span>
<span class="co">#&gt;     cat("size ", min(toolong))</span>
<span class="co">#&gt;     if(length(toolong)&gt;1) cat(", ", max(toolong))</span>
<span class="co">#&gt;     cat (" too big for plot\n")</span>
<span class="co">#&gt;    }</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   if(is.null(mindbh)) {</span>
<span class="co">#&gt;     cond_1 &lt;- censdata$status == "A" &amp;</span>
<span class="co">#&gt;       !unidentified.species(spcolumn, exactstr = unidennames)</span>
<span class="co">#&gt;     censdata &lt;- censdata[cond_1, , drop = FALSE]</span>
<span class="co">#&gt;     </span>
<span class="co">#&gt;   } else {</span>
<span class="co">#&gt;     cond_2 &lt;- censdata$status == "A" &amp;</span>
<span class="co">#&gt;       censdata$dbh &gt;= mindbh &amp;</span>
<span class="co">#&gt;       !unidentified.species(spcolumn, exactstr = unidennames)</span>
<span class="co">#&gt;     censdata &lt;- censdata[cond_2, , drop = FALSE]</span>
<span class="co">#&gt;     }</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   allsize=selectrandomquad(size,rectdim,replicates,plotdim)</span>
<span class="co">#&gt;   noquad=dim(allsize)[1]</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   spp=ind=numeric()</span>
<span class="co">#&gt;   for(i in 1:noquad)</span>
<span class="co">#&gt;   {</span>
<span class="co">#&gt;    cond_3 &lt;- censdata$gx &gt;= allsize$xlo[i] &amp; </span>
<span class="co">#&gt;      censdata$gx &lt; allsize$xhi[i] &amp;</span>
<span class="co">#&gt;      censdata$gy &gt;= allsize$ylo[i] &amp;</span>
<span class="co">#&gt;      censdata$gy &lt; allsize$yhi[i]</span>
<span class="co">#&gt;    data &lt;- censdata[cond_3, , drop = FALSE]</span>
<span class="co">#&gt;    </span>
<span class="co">#&gt;    spp[i]=length(unique(data[,spcolumn]))</span>
<span class="co">#&gt;    ind[i]=length(data[,spcolumn])</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;    if(i==1) plot(allsize$area[i],spp[i],pch=16,ylim=c(1,1200),xlim=c(.01,60),log="xy")</span>
<span class="co">#&gt;    else points(allsize$area[i],spp[i],pch=16)</span>
<span class="co">#&gt;   }</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   full=data.frame(area=allsize$area,taxa=spp,ind)</span>
<span class="co">#&gt;   taxa=tapply(full$taxa,full$area,mean)</span>
<span class="co">#&gt;   SDtaxa=tapply(full$taxa,full$area,sd)</span>
<span class="co">#&gt;   indiv=tapply(full$ind,full$area,mean)</span>
<span class="co">#&gt;   SDindiv=tapply(full$ind,full$area,sd)</span>
<span class="co">#&gt;   area=tapply(full$area,full$area,mean)</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   no.area=length(size)</span>
<span class="co">#&gt;   taxa[no.area+1]=length(unique(censdata[,spcolumn]))</span>
<span class="co">#&gt;   indiv[no.area+1]=length(censdata[,spcolumn])</span>
<span class="co">#&gt;   SDtaxa[no.area+1]=SDindiv[no.area+1]=NA</span>
<span class="co">#&gt;   area[no.area+1]=plotdim[1]*plotdim[2]/1e4</span>
<span class="co">#&gt;   xdim=c(size,plotdim[1])</span>
<span class="co">#&gt;   ydim=c(size*rectdim,plotdim[2])</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;   return(list(spparea=data.frame(xdim,ydim,area,indiv,SDindiv,taxa,SDtaxa),full=full))</span>
<span class="co">#&gt;   }</span>
<span class="co">#&gt; &lt;environment: namespace:forestr&gt;</span></code></pre></div>
</div>
<div id="map" class="section level3">
<h3 class="hasAnchor">
<a href="#map" class="anchor"></a><code><a href="../reference/map.html">map()</a></code>
</h3>
<div class="figure" style="text-align: center">
<img src="ref_map.png" alt="Reference" width="75%"><p class="caption">
Reference
</p>
</div>
<div class="figure" style="text-align: center">
<img src="actual_map.png" alt="Actual" width="75%"><p class="caption">
Actual
</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">map
<span class="co">#&gt; function(splitdatafile,</span>
<span class="co">#&gt;                 species,</span>
<span class="co">#&gt;                 spplist = NULL,</span>
<span class="co">#&gt;                 plotdim = c(1000, 500),</span>
<span class="co">#&gt;                 xrange = c(0, plotdim[1]),</span>
<span class="co">#&gt;                 yrange = c(0, plotdim[2]),</span>
<span class="co">#&gt;                 elevdata = NULL,</span>
<span class="co">#&gt;                 cutoff = c(10, 100, 300, 3000),</span>
<span class="co">#&gt;                 size = NULL,</span>
<span class="co">#&gt;                 deadtree = FALSE,</span>
<span class="co">#&gt;                 maintitle = '',</span>
<span class="co">#&gt;                 titlepos = c(plotdim[1] / 2, 1.32 * plotdim[2]),</span>
<span class="co">#&gt;                 clrs = NULL,</span>
<span class="co">#&gt;                 bw = FALSE,</span>
<span class="co">#&gt;                 bgcolor = 'white',</span>
<span class="co">#&gt;                 symbols = NULL,</span>
<span class="co">#&gt;                 xaxis = TRUE,</span>
<span class="co">#&gt;                 yaxis = TRUE,</span>
<span class="co">#&gt;                 addlegend = TRUE,</span>
<span class="co">#&gt;                 legpos = c(plotdim[1] / 2, 1.16 * plotdim[2]),</span>
<span class="co">#&gt;                 legsize = 0.75,</span>
<span class="co">#&gt;                 labsize = 1.15,</span>
<span class="co">#&gt;                 axisdiv = 100,</span>
<span class="co">#&gt;                 bty = 'n',</span>
<span class="co">#&gt;                 ht = 6,</span>
<span class="co">#&gt;                 wd = 9,</span>
<span class="co">#&gt;                 plotside = 6,</span>
<span class="co">#&gt;                 axspos = 0.5,</span>
<span class="co">#&gt;                 topoclr = 'gray80',</span>
<span class="co">#&gt;                 topoint = 0,</span>
<span class="co">#&gt;                 export = 'no',</span>
<span class="co">#&gt;                 filepath = '',</span>
<span class="co">#&gt;                 outfile = NULL</span>
<span class="co">#&gt; )</span>
<span class="co">#&gt; { </span>
<span class="co">#&gt;  filename=get.filename(file=outfile,path=filepath,exp=export,species=species)</span>
<span class="co">#&gt;  define.graphwindow(export = export,</span>
<span class="co">#&gt;    h = ht,</span>
<span class="co">#&gt;    w = wd,</span>
<span class="co">#&gt;    file = filename)</span>
<span class="co">#&gt;  if(export!="unix" &amp; export!="no" &amp; export!="mac" &amp; export!="windows") on.exit(graphics.off())</span>
<span class="co">#&gt;   </span>
<span class="co">#&gt;  col=latin=character()</span>
<span class="co">#&gt;  symb=numeric()</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  if(!is.null(spplist)) latin=spplist[species,]$Latin</span>
<span class="co">#&gt;  else latin=species</span>
<span class="co">#&gt;  </span>
<span class="co">#&gt;  nogrp=length(cutoff)-1</span>
<span class="co">#&gt;  if(is.null(size)) size=setsize(nogrp,dim(load.species(species[1],splitdatafile))[1])</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  if(is.null(clrs))</span>
<span class="co">#&gt;   {</span>
<span class="co">#&gt;    if(!bw) col=c("blue","red","black","green","yellow","lightblue","orange")</span>
<span class="co">#&gt;    else col=c("black","black","gray80","gray80","gray30","gray30")</span>
<span class="co">#&gt;   }</span>
<span class="co">#&gt;  else col=clrs</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  if(is.null(symbols)) </span>
<span class="co">#&gt;   {</span>
<span class="co">#&gt;    if(bw)  symb=rep(16,6)</span>
<span class="co">#&gt;    else symb=c(16,1,16,1,16,1)</span>
<span class="co">#&gt;   }</span>
<span class="co">#&gt;  else symb=symbols</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  topo=FALSE</span>
<span class="co">#&gt;  if(!is.null(elevdata)) topo=TRUE</span>
<span class="co">#&gt;  </span>
<span class="co">#&gt;  if(topo) </span>
<span class="co">#&gt;    maptopo(</span>
<span class="co">#&gt;      elevmat = elevdata,</span>
<span class="co">#&gt;      plotdim = plotdim,</span>
<span class="co">#&gt;      xaxis = xaxis,</span>
<span class="co">#&gt;      yaxis = yaxis,</span>
<span class="co">#&gt;      interval = topoint,</span>
<span class="co">#&gt;      ht = ht,</span>
<span class="co">#&gt;      wd = wd,</span>
<span class="co">#&gt;      plotside = plotside,</span>
<span class="co">#&gt;      labelsize = labsize,</span>
<span class="co">#&gt;      axspos = axspos,</span>
<span class="co">#&gt;      bgcolor = bgcolor,</span>
<span class="co">#&gt;      clr = topoclr</span>
<span class="co">#&gt;    )</span>
<span class="co">#&gt;  # browser()</span>
<span class="co">#&gt;  for(i in 1:length(species))</span>
<span class="co">#&gt;   {</span>
<span class="co">#&gt;    if(species[i] %in% names(splitdatafile)) sppdata=load.species(species[i],splitdatafile)</span>
<span class="co">#&gt;    else sppdata=data.frame(gx=numeric(),gy=numeric(),dbh=numeric(),status=character())</span>
<span class="co">#&gt;    </span>
<span class="co">#&gt;    if (is.null(deadtree)) {</span>
<span class="co">#&gt;      cond_1 &lt;- sppdata$gx &gt;= 0 &amp; </span>
<span class="co">#&gt;        sppdata$gy &gt;= 0 &amp; </span>
<span class="co">#&gt;        sppdata$gx &lt; plotdim[1] &amp; </span>
<span class="co">#&gt;        sppdata$gy &lt; plotdim[2]</span>
<span class="co">#&gt;      sppdata &lt;- sppdata[cond_1, , drop = FALSE]</span>
<span class="co">#&gt;    } else {</span>
<span class="co">#&gt;      if (deadtree) {</span>
<span class="co">#&gt;        cond_2 &lt;- sppdata$gx &gt;= 0 &amp; </span>
<span class="co">#&gt;          sppdata$gy &gt;= 0 &amp; </span>
<span class="co">#&gt;          sppdata$gx &lt; plotdim[1] &amp; </span>
<span class="co">#&gt;          sppdata$gy &lt; plotdim[2] &amp; </span>
<span class="co">#&gt;          sppdata$status == 'D'</span>
<span class="co">#&gt;        sppdata &lt;- sppdata[cond_2, , drop = FALSE]</span>
<span class="co">#&gt;      } else {</span>
<span class="co">#&gt;        cond_3 &lt;- sppdata$gx &gt;= 0 &amp; </span>
<span class="co">#&gt;            sppdata$gy &gt;= 0 &amp; </span>
<span class="co">#&gt;            sppdata$gx &lt; plotdim[1] &amp; </span>
<span class="co">#&gt;            sppdata$gy &lt; plotdim[2] &amp; </span>
<span class="co">#&gt;            sppdata$status == 'A'</span>
<span class="co">#&gt;        sppdata &lt;- sppdata[cond_3, , drop = FALSE]</span>
<span class="co">#&gt;      }</span>
<span class="co">#&gt;    }</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    if(i==1 &amp; !topo)</span>
<span class="co">#&gt;      map1species(sppdata,color=col[i],symbol=symb[i],size=size,xrange=xrange,yrange=yrange,xaxis=xaxis,yaxis=yaxis,</span>
<span class="co">#&gt;                  cutoff=cutoff,plotdim=plotdim,plotside=plotside,bgcolor=bgcolor,axspos=axspos,labsize=labsize,axisdiv=axisdiv)</span>
<span class="co">#&gt;    else</span>
<span class="co">#&gt;      map1species(sppdata,color=col[i],symbol=symb[i],cutoff=cutoff,xrange=xrange,yrange=yrange,</span>
<span class="co">#&gt;                  size=size,plotdim=plotdim,plotside=plotside,add=TRUE)</span>
<span class="co">#&gt;   }</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  # browser()</span>
<span class="co">#&gt;  oldpar=par(xpd=TRUE,font=3,xpd=NA)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  text(x=titlepos[1],y=titlepos[2],labels=maintitle,col=col[1],font=2,cex=1.25)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  if(addlegend) legend(x=legpos[1],y=legpos[2],legend=latin,xjust=0.5,col=col,text.col='black',bty=bty,pch=16,horiz=T,y.intersp=1.2,cex=legsize)</span>
<span class="co">#&gt;  par(oldpar)</span>
<span class="co">#&gt;  </span>
<span class="co">#&gt;  return(filename)</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; &lt;environment: namespace:forestr&gt;</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Rick Condit, Pamela Hall, Suzanne Lao, Kyle Harms, Mauro Lepore, CTFS-ForestGEO.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
