<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Topographic calculation based on stake and the height difference between them. — solve.topo â€¢ ctfs</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">ctfs</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Topographic calculation based on stake and the height difference between them.</h1>
    </div>

    
    <p>This is based on the problem and solution outlined in my book on plot methods (1998):
Each of N stakes i has an estimated height E[i] and a true height e[i]. 
Pairs of stakes have a height difference d[i,j], where e[i]+d[i,j]=e[j],
but only estimated height differences D[i,j] are known.
The least-squares estimate E[i] of e[i] can be written as the mean of the n[i]
points j for which D[i,j] was measured:</p>
    

    <pre><span class='co'># S3 method for topo</span>
<span class='fu'>solve</span>(<span class='no'>coldata</span>, <span class='kw'>column1</span> <span class='kw'>=</span> <span class='st'>"pt1"</span>, <span class='kw'>column2</span> <span class='kw'>=</span> <span class='st'>"pt2"</span>,
  <span class='kw'>diffcolumn</span> <span class='kw'>=</span> <span class='st'>"htdiff"</span>, <span class='kw'>basept</span> <span class='kw'>=</span> <span class='st'>"1"</span>, <span class='kw'>baseelev</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>debug</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>E[i]=mean(E[j]-D[i, j])</dt>
      <dd>= (1/n[i])*sum(E[j]) - (1/n[i])*sum(D[i,j])</dd>
      <dt>n[i]*E[i]-sum(E[j])</dt>
      <dd>= -sum(D[i,j])

The latter produces N equations in N unknowns, but they are exactly singular.
One of the points must be assigned a value, and it&#39;s easiest to set e[1] = 0.
The effect is to exclude the equation for i=0, but all j for which D[0,j] was
measured have unchanged equations (D[0,j] are included).
The equations are written in matrix form. The coefficients are a matrix M whose
diagonal elements are the n[i], so M[i,i] = n[i] for all i. All other entries are -1 
where D[i,j] was measured otherwise zero. The estimated E[i] are a vector, and the
vector V[i] = -sum(D[i,j]), where the summation is over j only. Then M*<!-- %*E=V, Minv -->
is the inverse of M, and E=Minv*<!-- %*V. -->
In theory, the program will accept duplicate measures of the same pair of plots.
They are treated as replicates with equal weight to all other estimates.
There would be -2 or -3 etc off the diagonal.
The data are in columns. One column has the label of one stake (column header pt1), the second
has the label of the second stake (column header pt2), and the final column has the height
difference at pt2 minus pt1 (column header diff). The point labelled basept is assigned elevation baseelev. 
The last 5 arguments allow those column headers to be reassigned.</dd>
    </dl>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Topographic calculation based on stake and the height difference between them.&#39;
solve.topo</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Not run: ------------------------------------</span>
<span class='co'># See topography tutorial</span>
<span class='co'>## ---------------------------------------------</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
